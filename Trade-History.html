<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Trade History</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    :root {
      --bg-primary: #0a0b1e;
      --bg-secondary: #151933;
      --bg-card: #1a1f3a;
      --bg-hover: #252b4a;
      --bg-sidebar: #0f1329;
      --text-primary: #ffffff;
      --text-secondary: #a0a9c9;
      --text-muted: #6b7280;
      --primary: #ffcc00;
      --primary-dark: #e6b800;
      --success: #10b981;
      --danger: #ef4444;
      --warning: #f59e0b;
      --info: #3b82f6;
      --border: #2a3050;
      --shadow: rgba(0, 0, 0, 0.25);
      --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    body {
      font-family: 'Inter', sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      overflow-x: hidden;
      line-height: 1.6;
      padding: 2rem;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
    }
    h1 {
      text-align: center;
      color: var(--primary);
      margin-bottom: 2rem;
      font-size: 2.2rem;
    }
    .actions {
      display: flex;
      justify-content: center;
      gap: 1rem;
      margin-bottom: 2rem;
      flex-wrap: wrap;
    }
    button {
      background-color: var(--bg-card);
      border: 1px solid var(--border);
      color: var(--text-primary);
      padding: 0.8rem 1.5rem;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: 500;
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    button:hover {
      background-color: var(--bg-hover);
      color: var(--primary);
    }
    button.primary {
      background-color: var(--primary);
      color: var(--bg-primary);
    }
    button.primary:hover {
      background-color: var(--primary-dark);
    }
    button.danger {
      background-color: var(--danger);
      color: white;
      border: none;
    }
    button.danger:hover {
      background-color: #d63031;
    }
    .stats-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin-bottom: 2rem;
    }
    .stat-card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 1.5rem;
      text-align: center;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    }
    .stat-value {
      font-size: 2rem;
      font-weight: bold;
      color: var(--primary);
      margin: 0.5rem 0;
    }
    .stat-label {
      color: var(--text-secondary);
      font-size: 0.9rem;
    }
    .filters {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 1.5rem;
      margin-bottom: 2rem;
    }
    .filter-group {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
      align-items: flex-end;
    }
    .filter-field {
      flex: 1;
      min-width: 200px;
    }
    .filter-label {
      display: block;
      margin-bottom: 0.5rem;
      font-size: 0.875rem;
      color: var(--text-secondary);
      font-weight: 500;
    }
    .filter-input, .filter-select {
      width: 100%;
      padding: 0.75rem;
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 8px;
      color: var(--text-primary);
      font-size: 0.875rem;
      transition: var(--transition);
    }
    .filter-input:focus, .filter-select:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(255, 204, 0, 0.1);
    }
    .table-container {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    }
    table {
      width: 100%;
      border-collapse: collapse;
    }
    th, td {
      padding: 1rem;
      text-align: left;
      border-bottom: 1px solid var(--border);
    }
    th {
      background: var(--bg-secondary);
      color: var(--primary);
      font-weight: 600;
      position: sticky;
      top: 0;
    }
    tr:hover {
      background: rgba(255, 204, 0, 0.05);
    }
    .positive {
      color: var(--success);
      font-weight: 600;
    }
    .negative {
      color: var(--danger);
      font-weight: 600;
    }
    .trade-type {
      display: inline-block;
      padding: 0.25rem 0.75rem;
      border-radius: 20px;
      font-size: 0.875rem;
      font-weight: 600;
    }
    .buy {
      background: rgba(16, 185, 129, 0.2);
      color: var(--success);
    }
    .sell {
      background: rgba(239, 68, 68, 0.2);
      color: var(--danger);
    }
    .status-badge {
      display: inline-block;
      padding: 0.25rem 0.75rem;
      border-radius: 20px;
      font-size: 0.875rem;
      font-weight: 600;
    }
    .open {
      background: rgba(59, 130, 246, 0.2);
      color: var(--info);
    }
    .closed {
      background: rgba(16, 185, 129, 0.2);
      color: var(--success);
    }
    .delete-icon {
      color: var(--danger);
      cursor: pointer;
      font-size: 1.2rem;
      transition: var(--transition);
    }
    .delete-icon:hover {
      transform: scale(1.2);
    }
    .empty-state {
      text-align: center;
      padding: 3rem;
      color: var(--text-muted);
    }
    .empty-state i {
      font-size: 3rem;
      margin-bottom: 1rem;
      color: var(--text-secondary);
    }
    .footer-buttons {
      margin-top: 2rem;
      text-align: center;
      display: flex;
      justify-content: center;
      gap: 1rem;
      flex-wrap: wrap;
    }
    .back-btn {
      position: fixed;
      top: 2rem;
      left: 2rem;
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 50%;
      width: 50px;
      height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text-secondary);
      font-size: 1.25rem;
      box-shadow: var(--shadow);
      z-index: 100;
    }
    .back-btn:hover {
      background: var(--bg-hover);
      color: var(--primary);
    }
    .refresh-btn {
      position: fixed;
      top: 2rem;
      right: 2rem;
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 50%;
      width: 50px;
      height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text-secondary);
      font-size: 1.25rem;
      box-shadow: var(--shadow);
      z-index: 100;
    }
    .refresh-btn:hover {
      background: var(--bg-hover);
      color: var(--primary);
    }
    .refresh-btn.spinning {
      animation: spin 1s linear infinite;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 1rem;
      box-shadow: var(--shadow);
      z-index: 1000;
      display: flex;
      align-items: center;
      gap: 0.75rem;
      min-width: 300px;
      animation: slideIn 0.3s ease;
    }
    @keyframes slideIn {
      from {
        transform: translateX(100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }
    .notification.success {
      border-left: 4px solid var(--success);
    }
    .notification.info {
      border-left: 4px solid var(--info);
    }
    .notification-icon {
      font-size: 1.25rem;
    }
    .notification.success .notification-icon {
      color: var(--success);
    }
    .notification.info .notification-icon {
      color: var(--info);
    }
    .notification-close {
      margin-left: auto;
      background: none;
      border: none;
      color: var(--text-muted);
      cursor: pointer;
      font-size: 1.25rem;
    }
    @media (max-width: 768px) {
      .filter-group {
        flex-direction: column;
      }

      .filter-field {
        min-width: 100%;
      }

      .actions, .footer-buttons {
        flex-direction: column;
        align-items: center;
      }

      table {
        font-size: 0.875rem;
      }

      th, td {
        padding: 0.75rem 0.5rem;
      }
    }
  </style>
</head>
<body>
  <a href="trading-dashboard.html" class="back-btn">
    <i class="fas fa-arrow-left"></i>
  </a>
  <button class="refresh-btn" id="refreshBtn" onclick="loadTradeHistory()">
    <i class="fas fa-sync-alt"></i>
  </button>

  <div class="container">
    <h1>Trade History</h1>

    <div class="stats-container">
      <div class="stat-card">
        <div class="stat-label">Total Trades</div>
        <div class="stat-value" id="totalTrades">0</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Open Trades</div>
        <div class="stat-value" id="openTrades">0</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Closed Trades</div>
        <div class="stat-value" id="closedTrades">0</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Profitable Trades</div>
        <div class="stat-value" id="profitableTrades">0</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Total Profit/Loss</div>
        <div class="stat-value" id="totalPnL">$0.00</div>
      </div>
    </div>

    <div class="filters">
      <div class="filter-group">
        <div class="filter-field">
          <label class="filter-label">Asset</label>
          <select class="filter-select" id="assetFilter">
            <option value="">All Assets</option>
            <option value="EURUSD">EUR/USD</option>
            <option value="GBPUSD">GBP/USD</option>
            <option value="USDJPY">USD/JPY</option>
            <option value="XAUUSD">Gold</option>
            <option value="BTCUSD">Bitcoin</option>
          </select>
        </div>
        <div class="filter-field">
          <label class="filter-label">Trade Type</label>
          <select class="filter-select" id="typeFilter">
            <option value="">All Types</option>
            <option value="buy">Buy</option>
            <option value="sell">Sell</option>
          </select>
        </div>
        <div class="filter-field">
          <label class="filter-label">Status</label>
          <select class="filter-select" id="statusFilter">
            <option value="">All Statuses</option>
            <option value="open">Open</option>
            <option value="closed">Closed</option>
          </select>
        </div>
        <div class="filter-field">
          <label class="filter-label">Date Range</label>
          <select class="filter-select" id="dateFilter">
            <option value="">All Time</option>
            <option value="today">Today</option>
            <option value="week">This Week</option>
            <option value="month">This Month</option>
          </select>
        </div>
        <div class="filter-field">
          <label class="filter-label">Profit/Loss</label>
          <select class="filter-select" id="pnlFilter">
            <option value="">All</option>
            <option value="profit">Profit Only</option>
            <option value="loss">Loss Only</option>
          </select>
        </div>
      </div>
      <div class="filter-group" style="margin-top: 1rem;">
        <button onclick="applyFilters()">
          <i class="fas fa-filter"></i> Apply Filters
        </button>
        <button onclick="resetFilters()">
          <i class="fas fa-redo"></i> Reset Filters
        </button>
        <button onclick="exportTrades()">
          <i class="fas fa-download"></i> Export CSV
        </button>
      </div>
    </div>

    <div class="table-container">
      <table>
        <thead>
          <tr>
            <th>Asset</th>
            <th>Type</th>
            <th>Size</th>
            <th>Profit/Loss</th>
            <th>Open Time</th>
            <th>Close Time</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="trade-body">
        </tbody>
      </table>
    </div>

    <div class="empty-state" id="emptyState" style="display: none;">
      <i class="fas fa-chart-line"></i>
      <h3>No trades found</h3>
      <p>Start trading to see your trade history here.</p>
    </div>

    <div class="footer-buttons">
      <button onclick="deleteAllTrades()" class="danger">
        <i class="fas fa-trash"></i> Delete All Trades
      </button>
      <button onclick="window.location.href='trading-dashboard.html'" class="primary">
        <i class="fas fa-chart-line"></i> Back to Trading Dashboard
      </button>
    </div>
  </div>

  <script>
    // Listen for trade history updates from dashboard
    window.addEventListener('tradeHistoryUpdated', function(event) {
      showNotification('info', 'Trade history updated');
      loadTradeHistory();
    });

    // Auto-refresh trade history every 5 seconds
    setInterval(loadTradeHistory, 5000);

    // Load trade history on page load
    document.addEventListener('DOMContentLoaded', function() {
      loadTradeHistory();
    });

    // Get current user from localStorage
    function getCurrentUser() {
      try {
        return JSON.parse(localStorage.getItem('userData'));
      } catch (error) {
        console.error('Error getting current user:', error);
        return null;
      }
    }

    // Get user-specific storage key
    function getUserStorageKey() {
      const currentUser = getCurrentUser();
      return currentUser ? `mitheral_trades_${currentUser.id}` : 'mitheral_trades';
    }

    // Get user-specific persistent data key
    function getUserPersistentDataKey() {
      const currentUser = getCurrentUser();
      return currentUser ? `mitheralFX_data_${currentUser.id}` : 'mitheralFX_persistent_data';
    }

    // Function to load and display trade history
    async function loadTradeHistory() {
      const tradeBody = document.getElementById("trade-body");
      const emptyState = document.getElementById("emptyState");
      const refreshBtn = document.getElementById("refreshBtn");

      // Show spinning animation on refresh button
      refreshBtn.classList.add('spinning');

      // Get filters
      const assetFilter = document.getElementById("assetFilter").value;
      const typeFilter = document.getElementById("typeFilter").value;
      const statusFilter = document.getElementById("statusFilter").value;
      const dateFilter = document.getElementById("dateFilter").value;
      const pnlFilter = document.getElementById("pnlFilter").value;

      let trades = [];
      const currentUser = getCurrentUser();

      if (!currentUser) {
        console.log('No user logged in, redirecting to login...');
        window.location.href = 'login.html';
        return;
      }

      try {
        // Load trades from backend API first
        if (window.API && window.API.token) {
          trades = await window.API.getTradeHistory();
          console.log('Loaded trades from backend:', trades);

          // Save to user-specific localStorage as backup
          localStorage.setItem(getUserStorageKey(), JSON.stringify(trades));
        } else {
          // Get trades from user-specific localStorage
          const userStorageKey = getUserStorageKey();
          const userPersistentDataKey = getUserPersistentDataKey();

          trades = JSON.parse(localStorage.getItem(userStorageKey)) || [];

          // If no trades found, check user-specific persistent data
          if (trades.length === 0) {
            const persistentData = JSON.parse(localStorage.getItem(userPersistentDataKey)) || {};
            trades = persistentData.allTrades || [];
          }

          // Fallback to old non-user-specific keys for backward compatibility
          if (trades.length === 0) {
            trades = JSON.parse(localStorage.getItem("mitheral_trades")) || [];

            if (trades.length === 0) {
              const persistentData = JSON.parse(localStorage.getItem("mitheralFX_persistent_data")) || {};
              trades = persistentData.allTrades || [];
            }
          }

          console.log(`Loaded trades for user ${currentUser.id}:`, trades);
        }
      } catch (error) {
        console.error('Error loading trades from backend:', error);
        // Fallback to user-specific localStorage
        const userStorageKey = getUserStorageKey();
        const userPersistentDataKey = getUserPersistentDataKey();

        trades = JSON.parse(localStorage.getItem(userStorageKey)) || [];

        if (trades.length === 0) {
          const persistentData = JSON.parse(localStorage.getItem(userPersistentDataKey)) || {};
          trades = persistentData.allTrades || [];
        }

        console.log('Fallback to user-specific localStorage trades:', trades);
      }

      // Apply filters
      if (assetFilter) {
        trades = trades.filter(trade => trade.asset === assetFilter);
      }

      if (typeFilter) {
        trades = trades.filter(trade => trade.type === typeFilter);
      }

      if (statusFilter) {
        trades = trades.filter(trade => trade.status === statusFilter);
      }

      if (dateFilter) {
        const now = new Date();
        const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());

        trades = trades.filter(trade => {
          const tradeDate = new Date(trade.openTime);

          if (dateFilter === "today") {
            return tradeDate >= today;
          } else if (dateFilter === "week") {
            const weekAgo = new Date(today);
            weekAgo.setDate(weekAgo.getDate() - 7);
            return tradeDate >= weekAgo;
          } else if (dateFilter === "month") {
            const monthAgo = new Date(today);
            monthAgo.setMonth(monthAgo.getMonth() - 1);
            return tradeDate >= monthAgo;
          }

          return true;
        });
      }

      if (pnlFilter) {
        trades = trades.filter(trade => {
          if (pnlFilter === "profit") {
            return trade.profit >= 0;
          } else if (pnlFilter === "loss") {
            return trade.profit < 0;
          }
          return true;
        });
      }

      // Sort trades by open time (newest first)
      trades.sort((a, b) => new Date(b.openTime) - new Date(a.openTime));

      // Clear table body
      tradeBody.innerHTML = "";

      // Remove spinning animation
      setTimeout(() => {
        refreshBtn.classList.remove('spinning');
      }, 500);

      // Check if there are any trades
      if (trades.length === 0) {
        emptyState.style.display = 'block';
        updateStats([]);
        return;
      }

      emptyState.style.display = 'none';

      // Populate table with trades
      trades.forEach((trade, index) => {
        const row = document.createElement("tr");

        // Format dates
        const openDate = new Date(trade.openTime);
        const formattedOpenDate = openDate.toLocaleDateString() + ' ' + openDate.toLocaleTimeString();

        let formattedCloseDate = '-';
        if (trade.closeTime) {
          const closeDate = new Date(trade.closeTime);
          formattedCloseDate = closeDate.toLocaleDateString() + ' ' + closeDate.toLocaleTimeString();
        }

        // Format profit/loss
        const profitClass = trade.profit >= 0 ? 'positive' : 'negative';
        const profitSign = trade.profit >= 0 ? '+' : '';

        // Format status
        const statusClass = trade.status === 'open' ? 'open' : 'closed';

        row.innerHTML = `
          <td>${trade.asset}</td>
          <td><span class="trade-type ${trade.type}">${trade.type.toUpperCase()}</span></td>
          <td>$${parseFloat(trade.size).toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</td>
          <td class="${profitClass}">${profitSign}$${parseFloat(trade.profit).toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</td>
          <td>${formattedOpenDate}</td>
          <td>${formattedCloseDate}</td>
          <td><span class="status-badge ${statusClass}">${trade.status.charAt(0).toUpperCase() + trade.status.slice(1)}</span></td>
          <td><span class="delete-icon" onclick="deleteTrade(${index})"><i class="fas fa-trash"></i></span></td>
        `;

        tradeBody.appendChild(row);
      });

      // Update stats
      updateStats(trades);
    }

    // Function to update statistics
    function updateStats(trades) {
      // If no trades provided, get all trades
      if (!trades) {
        const userStorageKey = getUserStorageKey();
        const userPersistentDataKey = getUserPersistentDataKey();

        trades = JSON.parse(localStorage.getItem(userStorageKey)) || [];

        // If no trades found, check user-specific persistent data
        if (trades.length === 0) {
          const persistentData = JSON.parse(localStorage.getItem(userPersistentDataKey)) || {};
          trades = persistentData.allTrades || [];
        }

        // Fallback to old non-user-specific keys for backward compatibility
        if (trades.length === 0) {
          trades = JSON.parse(localStorage.getItem("mitheral_trades")) || [];

          if (trades.length === 0) {
            const persistentData = JSON.parse(localStorage.getItem("mitheralFX_persistent_data")) || {};
            trades = persistentData.allTrades || [];
          }
        }
      }

      // Calculate statistics
      const totalTrades = trades.length;
      const openTrades = trades.filter(trade => trade.status === 'open').length;
      const closedTrades = trades.filter(trade => trade.status === 'closed').length;
      const profitableTrades = trades.filter(trade => trade.profit >= 0).length;
      const totalPnL = trades.reduce((sum, trade) => sum + trade.profit, 0);

      // Update DOM elements
      document.getElementById("totalTrades").textContent = totalTrades;
      document.getElementById("openTrades").textContent = openTrades;
      document.getElementById("closedTrades").textContent = closedTrades;
      document.getElementById("profitableTrades").textContent = profitableTrades;
      document.getElementById("totalPnL").textContent = `$${parseFloat(totalPnL).toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;
    }

    // Function to delete a single trade
    function deleteTrade(index) {
      if (confirm("Are you sure you want to delete this trade?")) {
        const userStorageKey = getUserStorageKey();
        const userPersistentDataKey = getUserPersistentDataKey();

        let trades = JSON.parse(localStorage.getItem(userStorageKey)) || [];

        // If no trades found, check user-specific persistent data
        if (trades.length === 0) {
          const persistentData = JSON.parse(localStorage.getItem(userPersistentDataKey)) || {};
          trades = persistentData.allTrades || [];
        }

        trades.splice(index, 1);
        localStorage.setItem(userStorageKey, JSON.stringify(trades));

        // Also update persistent data if it exists
        const persistentData = JSON.parse(localStorage.getItem(userPersistentDataKey)) || {};
        if (persistentData.allTrades) {
          persistentData.allTrades = trades;
          localStorage.setItem(userPersistentDataKey, JSON.stringify(persistentData));
        }

        loadTradeHistory();
      }
    }

    // Function to delete all trades
    function deleteAllTrades() {
      if (confirm("Are you sure you want to delete all trade history? This action cannot be undone.")) {
        const userStorageKey = getUserStorageKey();
        const userPersistentDataKey = getUserPersistentDataKey();

        localStorage.removeItem(userStorageKey);
        localStorage.removeItem(userPersistentDataKey);
        loadTradeHistory();
      }
    }

    // Function to apply filters
    function applyFilters() {
      loadTradeHistory();
    }

    // Function to reset filters
    function resetFilters() {
      document.getElementById("assetFilter").value = "";
      document.getElementById("typeFilter").value = "";
      document.getElementById("statusFilter").value = "";
      document.getElementById("dateFilter").value = "";
      document.getElementById("pnlFilter").value = "";
      loadTradeHistory();
    }

    // Function to export trades as CSV
    function exportTrades() {
      const userStorageKey = getUserStorageKey();
      const userPersistentDataKey = getUserPersistentDataKey();

      let trades = JSON.parse(localStorage.getItem(userStorageKey)) || [];

      // If no trades found, check user-specific persistent data
      if (trades.length === 0) {
        const persistentData = JSON.parse(localStorage.getItem(userPersistentDataKey)) || {};
        trades = persistentData.allTrades || [];
      }

      if (trades.length === 0) {
        alert("No trades to export.");
        return;
      }

      // Create CSV content
      let csv = "Asset,Type,Size,Profit/Loss,Open Time,Close Time,Status\n";

      trades.forEach(trade => {
        const openDate = new Date(trade.openTime);
        const formattedOpenDate = openDate.toLocaleDateString() + ' ' + openDate.toLocaleTimeString();

        let formattedCloseDate = '-';
        if (trade.closeTime) {
          const closeDate = new Date(trade.closeTime);
          formattedCloseDate = closeDate.toLocaleDateString() + ' ' + closeDate.toLocaleTimeString();
        }

        csv += `${trade.asset},${trade.type},${trade.size},${trade.profit},"${formattedOpenDate}","${formattedCloseDate}",${trade.status}\n`;
      });

      // Create download link
      const blob = new Blob([csv], { type: "text/csv" });
      const url = window.URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.setAttribute("hidden", "");
      a.setAttribute("href", url);
      a.setAttribute("download", "trade_history.csv");
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
    }

    // Function to show notification
    function showNotification(type, message) {
      // Remove any existing notifications
      const existingNotifications = document.querySelectorAll('.notification');
      existingNotifications.forEach(notification => notification.remove());

      // Create new notification
      const notification = document.createElement('div');
      notification.className = `notification ${type}`;

      const iconClass = type === 'success' ? 'fa-check-circle' : 'fa-info-circle';

      notification.innerHTML = `
        <i class="fas ${iconClass} notification-icon"></i>
        <span>${message}</span>
        <button class="notification-close" onclick="this.parentElement.remove()">
          <i class="fas fa-times"></i>
        </button>
      `;

      document.body.appendChild(notification);

      // Auto remove after 3 seconds
      setTimeout(() => {
        notification.remove();
      }, 3000);
    }
  </script>
</body>
</html>